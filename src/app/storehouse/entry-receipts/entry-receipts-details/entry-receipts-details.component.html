<div style="text-align: center;">
  <h4 style="margin: 0.5em 0 1em 0">Λεπτομέρειες δελτίου εισαγωγής</h4>
  <hr>
</div>

<div class="card" *ngIf="!error && !isFetching">
  <form [formGroup]="entryReceiptDetailsForm">
    <div class="p-fluid">
      <div class="p-field p-grid">
        <label class="p-col-12 p-mb-2 p-md-2 p-mb-md-0">Id</label>
        <div class="p-col-12 p-md-10">
          <input type="text" pInputText formControlName="id">
        </div>
      </div>
      <div class="p-field p-grid">
        <label class="p-col-12 p-mb-2 p-md-2 p-mb-md-0">Ημερομηνία</label>
        <div class="p-col-12 p-md-10">
          <textarea style="width: 100%; max-width: 100%;" [rows]="1" pInputTextarea [autoResize]="true"
            formControlName="dateOfEntry"></textarea>
          <app-print-error [control]='entryReceiptDetailsForm.controls.dateOfEntry'></app-print-error>
        </div>
      </div>
      <div class="p-field p-grid">
        <label class="p-col-12 p-mb-2 p-md-2 p-mb-md-0">Περιγραφή</label>
        <div class="p-col-12 p-md-10">
          <textarea style="width: 100%; max-width: 100%;" [rows]="1" pInputTextarea [autoResize]="true"
            formControlName="description"></textarea>
          <app-print-error [control]='entryReceiptDetailsForm.controls.description'></app-print-error>
        </div>
      </div>
      <div class="p-field p-grid">
        <label class="p-col-12 p-mb-2 p-md-2 p-mb-md-0">Παραλαβών</label>
        <div class="p-col-12 p-md-10">
          <textarea style="width: 100%; max-width: 100%;" [rows]="1" pInputTextarea [autoResize]="true"
            formControlName="recipient"></textarea>
          <app-print-error [control]='entryReceiptDetailsForm.controls.recipient'></app-print-error>
        </div>
      </div>
      <div class="p-field p-grid">
        <label class="p-col-12 p-mb-2 p-md-2 p-mb-md-0">Καταχωρήσεις</label>
      </div>
      <hr>
    </div>
  </form>
  <p-table
    [value]="entryRegistrationList"
    styleClass="p-datatable-striped"
    responsiveLayout="scroll">
    <ng-template pTemplate="header">
        <tr>
          <th width="15%">Id</th>
          <th width="15%">Ποσότητα</th>
          <th width="30%">Barcode προϊόντος</th>
          <th width="30%">Αναγνωριστικό ραφιού</th>
        </tr>
    </ng-template>
    <ng-template pTemplate="body" let-entryRegistrationList>
        <tr >
          <td>{{entryRegistrationList.id}}</td>
          <td>{{entryRegistrationList.quantity}}</td>
          <td>{{entryRegistrationList.productBarcode}}</td>
          <td>{{entryRegistrationList.shelfIdentifier}}</td>
        </tr>
    </ng-template>
  </p-table>
</div>
<div class="p-grid">
  <div class="p-col-2">
    <button
      pButton
      type="button"
      label="Ενημέρωση"
      [disabled]="!entryReceiptDetailsForm.valid"
      (click)="onUpdateEntryReceipt()"></button>
  </div>
  <div class="p-col-3">
    <button
      pButton
      class="p-button-danger"
      type="button"
      label="Διαγραφή δελτίου"
      (click)="confirm()"></button>
  </div>
</div>
<br>
<app-loading-error [error]="error" [isFetching]="isFetching" [errorMessage]="errorMessage"></app-loading-error>
