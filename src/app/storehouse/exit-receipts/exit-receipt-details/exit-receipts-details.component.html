<div style="text-align: center;">
  <h4 style="margin: 0.5em 0 1em 0">Λεπτομέρειες δελτίου εξαγωγής</h4>
  <hr>
</div>

<div class="card" *ngIf="!error && !isFetching">
  <form [formGroup]="exitReceiptDetailsForm">
    <div class="p-fluid">
      <div class="p-field p-grid">
        <label class="p-col-12 p-mb-2 p-md-2 p-mb-md-0">Id</label>
        <div class="p-col-12 p-md-10">
          <input type="text" pInputText formControlName="id">
        </div>
      </div>
      <div class="p-field p-grid">
        <label class="p-col-12 p-mb-2 p-md-2 p-mb-md-0">Ημερομηνία</label>
        <div class="p-col-12 p-md-10">
          <textarea style="width: 100%; max-width: 100%;" [rows]="1" pInputTextarea [autoResiz]e="true"
            formControlName="dateOfExit"></textarea>
          <app-print-error [control]='exitReceiptDetailsForm.controls.dateOfExit'></app-print-error>
        </div>
      </div>
      <div class="p-field p-grid">
        <label class="p-col-12 p-mb-2 p-md-2 p-mb-md-0">Αιτιολογία</label>
        <div class="p-col-12 p-md-10">
          <textarea style="width: 100%; max-width: 100%;" [rows]="1" pInputTextarea [autoResize]="true"
            formControlName="reasonForExit"></textarea>
          <app-print-error [control]='exitReceiptDetailsForm.controls.reasonForExit'></app-print-error>
        </div>
      </div>
      <div class="p-field p-grid">
        <label class="p-col-12 p-mb-2 p-md-2 p-mb-md-0">Παραδούς</label>
        <div class="p-col-12 p-md-10">
          <textarea style="width: 100%; max-width: 100%;" [rows]="1" pInputTextarea [autoResize]="true"
            formControlName="sender"></textarea>
          <app-print-error [control]='exitReceiptDetailsForm.controls.sender'></app-print-error>
        </div>
      </div>
    </div>
  </form>
  <div class="p-field p-grid">
    <label class="p-col-12 p-mb-2 p-md-2 p-mb-md-0">Καταχωρήσεις</label>
  </div>
  <hr>
  <p-table
    [value]="exitRegistrationList"
    styleClass="p-datatable-striped"
    responsiveLayout="scroll">
    <ng-template pTemplate="header">
        <tr>
          <th width="15%">Id</th>
          <th width="15%">Ποσότητα</th>
          <th width="30%">Barcode προϊόντος</th>
          <th width="30%">Αναγνωριστικό ραφιού</th>
        </tr>
    </ng-template>
    <ng-template pTemplate="body" let-exitRegistrationList>
        <tr >
          <td>{{exitRegistrationList.id}}</td>
          <td>{{exitRegistrationList.quantity}}</td>
          <td>{{exitRegistrationList.productBarcode}}</td>
          <td>{{exitRegistrationList.shelfIdentifier}}</td>
        </tr>
    </ng-template>
  </p-table>
</div>
<div class="p-grid">
  <div class="p-col-2">
    <button
      pButton
      type="button"
      label="Ενημέρωση"
      [disabled]="!exitReceiptDetailsForm.valid"
      (click)="onUpdateExitReceipt()"></button>
  </div>
  <div class="p-col-3">
    <button
      pButton
      class="p-button-danger"
      type="button"
      label="Διαγραφή δελτίου"
      (click)="confirm()"></button>
  </div>
</div>
<br>
<app-loading-error [error]="error" [isFetching]="isFetching" [errorMessage]="errorMessage"></app-loading-error>
